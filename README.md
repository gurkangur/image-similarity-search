# Image Search API

This is a Flask application that allows users to upload images and search for similar images using embeddings generated by the CLIP model. The application uses Qdrant as the vector database for storing and retrieving image embeddings.

## Features

- Upload images and store them in a vector database.
- Search for similar images based on a query image.
- Uses OpenAI's CLIP model for image feature extraction.

## Requirements

- Python 3.7 or higher
- Flask
- Qdrant client
- Pillow
- Transformers
- Torch

You can install the required packages using pip:

```bash
pip install Flask qdrant-client Pillow transformers torch
```

## Setup

1.  **Start Qdrant**: Make sure you have a running instance of Qdrant. You can start it using Docker with the following command:

```bash
docker run -p 6333:6333 qdrant/qdrant
```

2. **Run the Flask App**: 
```bash
python app.py
```
The API will be available at `http://localhost:5000`.

## API Endpoints

### Upload Image

-   **Endpoint**: `/upload`
-   **Method**: `POST`
-   **Request**: Form-data with an image file.
-   **Response**:
    -   **Success**: `{"message": "Image uploaded successfully", "product_id": <id>}`
    -   **Error**: `{"error": "<error_message>"}`

### Search Images

-   **Endpoint**: `/search`
-   **Method**: `POST`
-   **Request**: Form-data with an image file for querying.
-   **Response**:
    -   **Success**: `{"results": [{"product_id": <id>, "score": <similarity_score>}, ...]}`
    -   **Error**: `{"error": "<error_message>"}`